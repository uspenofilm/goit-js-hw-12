{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst searchParams = new URLSearchParams({\n  key: '27065513-503b047e62eedc8adb85626ce',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n});\n\nexport const sendRequest = async (q, page) => {\n  const response = await axios.get(`?${searchParams}&q=${q}&page=${page}`);\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createMarkup(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', images.map(imageToString).join(''));\n  function imageToString(image) {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\"\n          />\n        <div class=\"photo-info\">\n        <div>Likes <span>${image.likes}</span></div>\n        <div>Views <span>${image.views}</span></div>\n        <div>Comments <span>${image.comments}</span></div>\n        <div>Downloads <span>${image.downloads}</span></div>\n        </div>\n        </a>\n      </li>`;\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst searchLine = form.querySelector('input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more-btn');\nlet q = '';\nlet page = 0;\n\nimport { sendRequest } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nloader.style.display = 'none';\nloadMore.style.display = 'none';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  q = searchLine.value.trim();\n  page = 1;\n  if (q === '') {\n    iziToast.show({\n      message: 'Please fill out this field',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      maxWidth: '432px',\n    });\n  }\n  loader.style.display = 'block';\n  form.reset();\n  const response = await sendRequest(q, page);\n  const images = response.hits;\n  loader.style.display = 'none';\n  if (images.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      maxWidth: '432px',\n    });\n  }\n  createMarkup(images);\n  loadMore.style.display = 'block';\n});\n\nloadMore.addEventListener('click', async event => {\n  page += 1;\n  loader.style.display = 'block';\n  const response = await sendRequest(q, page);\n  console.log(response);\n  const images = response.hits;\n  const totalPages = Math.ceil(response.totalHits / 15);\n  loader.style.display = 'none';\n  createMarkup(images);\n  window.scrollBy({\n    top: 400,\n    behavior: 'smooth',\n  });\n  \n  if (page > totalPages) {\n    loadMore.style.display = 'none';\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n});\n"],"names":["axios","searchParams","sendRequest","q","page","createMarkup","images","imageToString","image","SimpleLightbox","form","searchLine","gallery","loader","loadMore","event","iziToast","response","totalPages"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACZ,CAAC,EAEYC,EAAc,MAAOC,EAAGC,KAClB,MAAMJ,EAAM,IAAI,IAAIC,CAAY,MAAME,CAAC,SAASC,CAAI,EAAE,GACvD,KCVX,SAASC,EAAaC,EAAQ,CACnB,SAAS,cAAc,UAAU,EACzC,mBAAmB,YAAaA,EAAO,IAAIC,CAAa,EAAE,KAAK,EAAE,CAAC,EAC1E,SAASA,EAAcC,EAAO,CAC5B,MAAO;AAAA,wCAC6BA,EAAM,aAAa;AAAA;AAAA;AAAA,mBAGxCA,EAAM,YAAY;AAAA,mBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,2BAGFA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,YAI3C,CACgB,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CCzBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAaD,EAAK,cAAc,OAAO,EACvCE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,gBAAgB,EACxD,IAAIX,EAAI,GACJC,EAAO,EAKXS,EAAO,MAAM,QAAU,OACvBC,EAAS,MAAM,QAAU,OAEzBJ,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAC7CA,EAAM,eAAc,EACpBH,EAAQ,UAAY,GACpBT,EAAIQ,EAAW,MAAM,OACrBP,EAAO,EACHD,IAAM,IACRa,EAAS,KAAK,CACZ,QAAS,6BACT,aAAc,UACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,WACV,SAAU,OAChB,CAAK,EAEHH,EAAO,MAAM,QAAU,QACvBH,EAAK,MAAK,EAEV,MAAMJ,GADW,MAAMJ,EAAYC,EAAGC,CAAI,GAClB,KACxBS,EAAO,MAAM,QAAU,OACnBP,EAAO,SAAW,GACpBU,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,UACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,WACV,SAAU,OAChB,CAAK,EAEHX,EAAaC,CAAM,EACnBQ,EAAS,MAAM,QAAU,OAC3B,CAAC,EAEDA,EAAS,iBAAiB,QAAS,MAAMC,GAAS,CAChDX,GAAQ,EACRS,EAAO,MAAM,QAAU,QACvB,MAAMI,EAAW,MAAMf,EAAYC,EAAGC,CAAI,EAC1C,QAAQ,IAAIa,CAAQ,EACpB,MAAMX,EAASW,EAAS,KAClBC,EAAa,KAAK,KAAKD,EAAS,UAAY,EAAE,EAQpD,GAPAJ,EAAO,MAAM,QAAU,OACvBR,EAAaC,CAAM,EACnB,OAAO,SAAS,CACd,IAAK,IACL,SAAU,QACd,CAAG,EAEGF,EAAOc,EACT,OAAAJ,EAAS,MAAM,QAAU,OAClBE,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACf,CAAK,CAEL,CAAC"}